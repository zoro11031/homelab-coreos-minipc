version: '3.8'

services:
  devcontainer:
    build:
      context: ..
      dockerfile: .devcontainer/Dockerfile
    volumes:
      - ..:/workspace:cached
      # Cache Go modules to avoid re-downloading across container lifecycles
      - go-modules:/go/pkg/mod
      # Cache Go build artifacts to speed up subsequent builds
      - go-build-cache:/home/vscode/.cache/go-build
    command: sleep infinity
    working_dir: /workspace

volumes:
  go-modules:
  go-build-cache:
